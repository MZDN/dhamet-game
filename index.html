<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>Alquerque Game</title>
  <meta name="description" content="Alquerque Game">
  <meta name="author" content="Boris Gallet, Benoit Rospars">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="stylesheet" href="css/style.css?v=1.0">

  <!--[if lt IE 9]>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.js"></script>
  <![endif]-->
</head>

<body>
  <div class="wrapper">
    <div class="svg-wrapper">
      <svg id="board"></svg>
    </div>
    <div class="controls">
      <h3>Controls : </h3>
      <li>
        <button id="newGame">New Game</button>
        <button id="startGame">Start Game</button>
        <button id="pauseGame">Pause Game</button>
      </li>
    </div>
    <div class="settings">
      <h3>Settings : </h3>
      <li>
        <label>Speed :</label>
        <input id="speed" type="text"/> ms
      </li>
      <li>
        <label>IA White</label>
        <input id="whiteIAEnabled" type="checkbox"/>
        <select id="whiteIAMode"></select>
        <label>Depth : </label>
        <input id="whiteIADepth" type="text"/>
      </li>
      <li>
        <label>IA Black</label>
        <input id="blackIAEnabled" type="checkbox"/>
        <select id="blackIAMode"></select>
        <label>Depth : </label>
        <input id="blackIADepth" type="text"/>
      </li>
    </div>
  </div>

  <script src="lib/snap.svg-min.js"></script>
  <script src="lib/jquery.min.js"></script>
  <script src="js/functions.js"></script>
  <script src="js/Game.js"></script>
  <script src="js/Board.js"></script>
  <script src="js/Pawn.js"></script>
  <script src="js/IA.js"></script>
  <script>
    var svg = Snap('#board');
    var game = new Game();
    
    var options = {
      whiteIAEnabled : true,
      blackIAEnabled : true,
      whiteIAMode : "MINIMAX",
      blackIAMode : "MINIMAX",
      whiteIADepth : 4,
      blackIADepth : 4,
      speed : 50,
      movesVector : {
        'NORTH' : { x: 0, y: -1},
        'EAST' : { x: 1, y: 0},
        'SOUTH' : { x: 0, y: 1},
        'WEST' : { x: -1, y: 0},
        'NORTHEAST' : { x: 1, y: -1},
        'NORTHWEST' : { x: -1, y: -1},
        'SOUTHEAST' : { x: 1, y: 1},
        'SOUTHWEST' : { x: -1, y: 1},
        'TAKENORTH' : { x: 0, y: -2},
        'TAKEEAST' : { x: 2, y: 0},
        'TAKESOUTH' : { x: 0, y: 2},
        'TAKEWEST' : { x: -2, y: 0},
        'TAKENORTHEAST' : { x: 2, y: -2},
        'TAKENORTHWEST' : { x: -2, y: -2},
        'TAKESOUTHEAST' : { x: 2, y: 2},
        'TAKESOUTHWEST' : { x: -2, y: 2}
      },
      IAModes : ["RANDOM","EATFIRST","MINIMAX"]
    };
    
    $(document).ready(function(){
      
      // Init inputs to default parameters
      $("#whiteIAEnabled").prop('checked', options.whiteIAEnabled);
      $("#blackIAEnabled").prop('checked', options.blackIAEnabled);
      $("#speed").val(options.speed);
      $("#whiteIADepth").val(options.whiteIADepth);
      $("#blackIADepth").val(options.blackIADepth);
      for(var i in options.IAModes){
        var mode = options.IAModes[i];
        $('#whiteIAMode').append($("<option />").val(mode).html(mode));
        $('#blackIAMode').append($("<option />").val(mode).html(mode));
      }
      $("#whiteIAMode").val(options.whiteIAMode);
      $("#blackIAMode").val(options.blackIAMode);
      
      //When settings change update options 
      $('input, select').on('change',function(){
          options.whiteIAEnabled = $("#whiteIAEnabled").prop('checked');
          options.blackIAEnabled = $("#blackIAEnabled").prop('checked');
          options.whiteIAMode = $("#whiteIAMode").val();
          options.blackIAMode = $("#blackIAMode").val();
          options.whiteIADepth = parseInt($("#whiteIADepth").val());
          options.blackIADepth = parseInt($("#blackIADepth").val());
          options.speed = parseInt($("#speed").val());
        
          console.log(options);
      });
      
      //clear the game and init a new one
      $('#newGame').click(function(){
        svg.clear();
        svg = Snap('#board');
        game.destroy();
        game = new Game();
        game.init();
      });
      
      //start game
      $('#startGame').click(function(){
        game.start();
      });
      
      //pause game
      $('#pauseGame').click(function(){
        game.pause();
      });
      
      //init the game
      game.init();
      
    }); 
    
  </script>
</body>
</html>
